##### =========================
#####  T M U X   C O N F I G
#####  Catppuccin Mocha (pastel)
##### =========================
#####  T M U X   C O N F I G
#####  Catppuccin Mocha (flat / no powerline arrows)
##### =========================

##### --- TPM plugins ---
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'catppuccin/tmux#v2.1.3'
set -g @catppuccin_flavor 'mocha'
# Use tmux window name (not terminal title) in catppuccin window list
set -g @catppuccin_window_text "#W"
set -g @catppuccin_window_current_text "#W"

##### --- Terminal / TrueColor support ---
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:RGB"
set -as terminal-overrides ",kitty:RGB"

##### --- General behavior ---
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g allow-rename off
set -g automatic-rename on
setw -g automatic-rename-format "#{pane_current_command}"
set -g history-limit 20000

##### --- Keybindings (vim-like) ---

# Fast window switching (Alt + number)
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Pane navigation (vim keys)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Pane resizing (hold Shift + H/J/K/L)
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5

# Splits (more intuitive)
unbind '"'
unbind %
bind | split-window -h
bind - split-window -v

# Rename window and lock name (disables auto-rename for that window)
unbind ,
bind , command-prompt -I "#W" "rename-window '%%'; set -w automatic-rename off"

# Re-enable auto-rename for current window
bind R set -w automatic-rename on \; display-message "auto-rename: on"

# Copy mode with vi keybindings
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle
bind-key -T copy-mode-vi 'y' send -X copy-selection
unbind-key -T copy-mode-vi v

##### --- Popup terminal ---
set -g popup-border-style "fg=#89b4fa"
bind p display-popup -E -w 70% -h 60% -x C -y C \
  -B -T "Floating Popup" -- "tmux new-session -A -s popup"

##### =========================
#####  C A T P P U C C I N  M O C H A
#####  Explicit hex colors (stable, no @thm vars)
##### =========================

# Palette references (Mocha)
# base   #1e1e2e
# mantle #181825
# crust  #11111b
# text   #cdd6f4
# sub0   #a6adc8
# s0     #313244
# s1     #45475a
# s2     #585b70
# blue   #89b4fa
# mauve  #cba6f7
# pink   #f5c2e7

##### --- Pane borders ---
set -g pane-border-style "fg=#45475a"
set -g pane-active-border-style "fg=#89b4fa"
set -g display-panes-colour "#a6adc8"
set -g display-panes-active-colour "#f5c2e7"

##### --- Messages and prompts ---
set -g message-style "bg=#181825,fg=#cdd6f4"
set -g message-command-style "bg=#181825,fg=#89b4fa"

##### --- Copy/selection mode style ---
set -g mode-style "bg=#45475a,fg=#cdd6f4"

##### =========================
#####  S T A T U S  B A R  (flat)
#####  - no arrows / no powerline
#####  - readable right side (separate background)
##### =========================

set -g status on
set -g status-interval 2
set -g status-position bottom

# Base style for the whole bar (dark background, readable)
set -g status-style "bg=#181825,fg=#cdd6f4"

# Remove separators that look like "arrows"
set -g window-status-separator " "

# Left/right sizes
set -g status-left-length 60
set -g status-right-length 120

##### --- Left: session indicator (no arrows) ---
# Uses an icon if you have a Nerd Font; otherwise it still looks fine.
set -g status-left "#[fg=#f5c2e7,bg=#181825] 󰆍 #S  "

##### --- Windows: simple highlight only ---
# Inactive windows: subtle
set -g window-status-style "fg=#a6adc8,bg=#181825"
set -g window-status-format " #[fg=#a6adc8]#I #[fg=#cdd6f4]#W "

# Active window: pastel pink background + dark text (clear highlight)
set -g window-status-current-style "fg=#11111b,bg=#f5c2e7"
set -g window-status-current-format " #[bold]#I #W "

##### --- Activity / bell indicators (optional but nice) ---
set -g window-status-bell-style "bg=#f38ba8,fg=#11111b"
set -g window-status-activity-style "bg=#f9e2af,fg=#11111b"

##### --- Right: path + time on a "pill" background ---
# This makes the right side visible instead of blending into the bar.
set -g status-right "#[fg=#11111b,bg=#f5c2e7]  #{pane_current_path}  #[fg=#11111b,bg=#cba6f7] 󰥔 %H:%M "

##### --- Window titles (optional) ---
setw -g automatic-rename-format "#{pane_current_command}"
set -g set-titles on
set -g set-titles-string "tmux: #S — #W"

##### --- Initialize TPM ---
run '~/.tmux/plugins/tpm/tpm'
